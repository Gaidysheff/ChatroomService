{% extends 'Chat/base.html' %} {% block content %}
<br />
<div class="container">
  <div class="col-12" style="text-align: center">
    <h1>What chat room would you like to enter?</h1>
    <br />
    <input
      id="room-name-input"
      class="form-control form-control-lg"
      type="text"
      placeholder="Enter your favourable room"
    />
    <br />
    {% if user.is_authenticated %}
    <input
      id="room-name-submit"
      class="btn btn-primary btn-lg btn-block"
      type="button"
      value="Enter"
    />
    {% else %}
    <button class="btn btn-danger btn-lg btn-block">Enter</button>
    <p style="color: red; font-size: x-large">
      Please, register and/or login. Then 'Enter' will be activated
    </p>
    {% endif %}
  </div>
</div>
<script>
  document.querySelector("#room-name-input").focus();
  document.querySelector("#room-name-input").onkeyup = function (e) {
    if (e.keyCode === 13) {
      document.querySelector("#room-name-submit").click();
    }
  };

  document.querySelector("#room-name-submit").onclick = function (e) {
    var roomName = document.querySelector("#room-name-input").value;
    window.location.pathname = "/chat/" + roomName + "/";
  };
</script>
{% endblock content %}
